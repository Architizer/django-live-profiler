{% extends 'profiler/base.html' %}
{% block content %}

{% comment %}
{% for k,v in queries.items %}
<table class="table table-striped sortable">
  <thead>
    <tr>
      <th>Query</th>
      <th class="num">Times ran</th>
      <th class="num">Total time</th>
      <th class="num">Avg time</th>
    </tr>
    <tr>
      <th>{{ k }}</th>
      <th class="num">{{ v.count }}</th>
      <th class="num">{{ v.time }}</th>
      <th class="num">{{ v.average_time|floatformat:2 }}</th>
    </tr>      

  </thead>
  <tbody>  
    {% for q in v.queries %}      
    <tr>
      <td class="query-collapse">{{ q.query }}</td>
      <td class="num">{{ q.count }}</td>
      <td class="num">{{ q.time }}</td>
      <td class="num">{{ q.average_time|floatformat:2 }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endfor %}
{% endcomment %}
<style type="text/css">

.node rect {
  cursor: pointer;
  fill: #fff;
  fill-opacity: .5;
  stroke: #fff;
  stroke-width: 0.5px;
}

.node text {
/*  font: 12px sans-serif;*/
  pointer-events: none;
}

path.link {
  fill: none;
  stroke: #9ecae1;
  stroke-width: 1.5px;
}

    </style>
 <div id="chart"></div>
<script type="text/javascript">
$(function(){

//data = {{ tree_data|safe }};
var data = toTree({{ stats|safe }},
function(row) { var p = (row['view']||'None').split('.'); p[p.length]=row['query']; return p;},
function(row) { return row; });
data.x0=0;data.y0=0;
update(root = data);

});
</script>

{% endblock %}
